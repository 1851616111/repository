image: golang:1.5-wheezy
services:
  - mongodb
env:
  - MONGO_PORT_27017_TCP_ADDR=$MONGODB_PORT_27017_TCP_ADDR
  - MONGO_PORT_27017_TCP_PORT=$MONGODB_PORT_27017_TCP_PORT
before_script:
  - apt-get update -y
  - apt-get -y install git-core subversion mercurial
  - export GOPATH=/gopath
  - go get -t github.com/asiainfoLDP/datahub_repository
script:
  - export GOPATH=/gopath
  - go test -v github.com/asiainfoLDP/datahub_repository
notify:  
  email:
    recipients:
      - mengjing@asiainfo.com
    on_success: on
    on_failure: on
