image: daocloud/ci-golang:1.4
services:
  - mongodb
env:
  - MONGO_PORT_27017_TCP_ADDR=$MONGODB_PORT_27017_TCP_ADDR
  - MONGO_PORT_27017_TCP_PORT=$MONGODB_PORT_27017_TCP_PORT
  - MQ_KAFKA_ADDR=172.17.4.26
  - MQ_KAFKA_PORT=9092
before_script:
  - export GOPATH=/gopath
  - go get -t github.com/asiainfoLDP/datahub_repository
script:
  - export GOPATH=/gopath
  - go test -v github.com/asiainfoLDP/datahub_repository
